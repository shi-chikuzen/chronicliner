========================================
キャラクター設定
========================================

Excelファイルの ``キャラクター`` シートを使用し、各キャラクターの設定を行います。

1. 概要
========================================

.. csv-table::
    :header: "カラム名", "設定", "使用可能な値", "概要", "設定例"

    ":ref:`characterName`", "必須", "``all`` 、 ``summary`` 以外の文字列", "キャラクターの名前", "ルーナ"
    ":ref:`category`", "必須", ":doc:`./category` で設定したカテゴリ名", "キャラクターの所属するカテゴリの名前", "レイブンクロー"
    ":ref:`birthday`", "必須", "``yyyy-MM-dd`` 形式の日付", "キャラクターの誕生日", "1981/2/13"
    ":ref:`deathday`", "任意", "``yyyy-MM-dd`` 形式の日付", "キャラクターの死亡日", "2067/2/3"
    ":ref:`schoolName`", "任意", "``{教育課程名}_{教育課程名}`` 形式の文字列", "キャラクターの所属する教育課程", "小学校_中学校_高校_T大"
    ":ref:`schoolOffset`", "任意", "``{調整年数}_{調整年数}`` 形式の文字列", ":doc:`./school` で設定した該当教育課程の開始年齢からのずらし年数", "0_0_0_1"
    ":ref:`startGrade`", "任意", "``{開始学年}_{開始学年}`` 形式の文字列", ":doc:`./school` で設定した該当教育課程に対するキャラクターの開始学年", "0_0_0_2_0"
    ":ref:`autoBirth`", "必須", "``TRUE`` 、 ``FALSE``", "教育課程名・学年・年齢から誕生年を逆算するか", "TRUE"
    ":ref:`autoYear`", "任意", "``yyyy`` 形式の西暦4桁", "誕生年自動計算が ``TRUE`` の場合、 ``yyyy`` 年の教育課程開始月に ``{教育課程名}`` の ``n`` 学年目に進学すると設定する", "2000"
    ":ref:`autoSchool`", "任意", ":doc:`./school` と :ref:`schoolName` で設定した教育課程名", "誕生年自動計算が ``TRUE`` の場合、 ``yyyy`` 年の教育課程開始月に ``{教育課程名}`` の ``n`` 学年目に進学すると設定する", "高校"
    ":ref:`autoGrade`", "任意", "``{教育課程名}`` の年数以内の整数", "誕生年自動計算が ``TRUE`` の場合、 ``yyyy`` 年の教育課程開始月に ``{教育課程名}`` の ``n`` 学年目に進学すると設定する", "1"

.. note::
    誕生日自動計算を使用する場合、誕生日に設定した年数は無視されます

.. warning::
    誕生日自動計算を使用する場合、:ref:`schoolName`・:ref:`autoYear`・:ref:`autoSchool`・:ref:`autoGrade` の設定が必須になります

2. 各設定項目
================================================================

.. _characterName:

キャラクタ名
-------------------------------
キャラクターの名前を設定します。

.. warning::
    カテゴリとキャラクターには同一名称を使用できません

.. _category:

カテゴリ
---------------------------------------------------------------
キャラクターの所属するカテゴリを指定します。

.. warning::
    :doc:`./category` で設定していないカテゴリ名を指定するとエラーが発生します

.. _birthday:

誕生日
--------------
キャラクターの誕生日を ``yyyy-MM-dd`` 形式で設定します。

:ref:`autoBirth` を使用する場合、西暦部分に設定された値は無視されるため、適当な値を入力すれば問題ありません。

.. _deathday:

死亡日
---------------------------------------------------------------
キャラクターの死亡日を ``yyyy-MM-dd`` 形式で設定します。

.. _schoolName:

教育課程名
-------------------------------
キャラクターの教育課程を :doc:`./school` で設定した教育課程の名称から設定します。

キャラクターが複数の教育課程を経る場合、 ``_`` で各教育課程名称を区切った値を入力してください。

.. note::
    指定された教育課程の期間に重複がある場合、重複期間については後に指定された教育課程に所属しているものとして処理されます

.. warning::
    :doc:`./school` で設定した年数・開始年齢に対し、設定した教育課程名の並び順に齟齬がある場合、エラーが発生します


.. _schoolOffset:

開始年齢調整
---------------------------------------------------------------
:ref:`schoolName` でキャラクターに設定した各教育課程について、 :doc:`./school` で設定した開始年齢に対する調整年数を設定します。

設定された複数の教育課程に対しそれぞれ異なる調整年数を設定したい場合、 ``_`` で各教育課程に対する調整年数を指定します。すべての課程に対し一括で値を指定したい場合は、 ``{年数}`` のみの指定で動作します。

.. note::
    教育課程設定の開始年齢等に一般的な値を設定しており、かつ小学校、中学校、高校、浪人1年、大学と設定したい場合、 ``0_0_0_1`` を指定します

.. warning::
    複数の教育課程に対しそれぞれ異なる調整年数を設定する場合、調整年数の項目数と教育課程数が同一である必要があります

.. _startGrade:

入学学年
------------------------
:ref:`schoolName` でキャラクターに設定した各教育課程について、その教育課程に入学する学年を設定します。指定しなかった場合はすべての課程に ``1`` が適用されます。

.. note::
    小学校、中学校、高校A（1年間）、高校B（2年間）、大学と設定したい場合、 ``1_1_1_2_1`` を指定します

.. _autoBirth:

誕生年自動計算
---------------------------------------------------------------
``TRUE`` を指定した場合、 :ref:`schoolName`・:ref:`autoYear`・:ref:`autoSchool`・:ref:`autoGrade` から、 ``yyyy`` 年の教育課程開始月に ``{教育課程名}`` の ``n`` 学年目に進学するとした場合の誕生年を自動計算します。

.. _autoYear:

起算年
---------------------------------------------------------------
誕生年自動計算が ``TRUE`` の場合、値を「 ``yyyy`` 年の教育課程開始月に ``{教育課程名}`` の ``n`` 学年目に進学する」の ``yyyy`` に使用します。

.. _autoSchool:

起算課程
---------------------------------------------------------------
誕生年自動計算が ``TRUE`` の場合、値を「 ``yyyy`` 年の教育課程開始月に ``{教育課程名}`` の ``n`` 学年目に進学する」の ``{教育課程名}`` に使用します。

.. _autoGrade:

起算学年
---------------------------------------------------------------
誕生年自動計算が ``TRUE`` の場合、値を「 ``yyyy`` 年の教育課程開始月に ``{教育課程名}`` の ``n`` 学年目に進学する」の ``n`` に使用します。

3. 特記事項
================================================================

3.1. キャラクターの留学により教育課程の開始月が変動する場合
--------------------------------------------------------------------------------

``{前の教育課程の開始月}`` <= ``{後の教育課程の開始月}`` （日本から欧米への留学等）の場合
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

浪人等別途の事情がなければ、特別な設定を行う必要はありません

``{前の教育課程の開始月}`` > ``{後の教育課程の開始月}`` （欧米から日本への留学等）の場合
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

各教育課程に対し一般的な値を設定している場合、後の教育課程の開始月が前の教育課程の卒業月より前になるため、デフォルトでは重複期間の教育課程が上書きされます。

前の教育課程の卒業後に後の教育課程に入学したい場合、後の教育課程に対し開始年齢調整で ``1`` （+浪人年数）を指定してください。

3.2. 誕生年自動計算と開始年齢調整の双方を設定する場合
--------------------------------------------------------------------------------

誕生年は開始年齢調整の値を考慮して逆算されるため、特別な設定を行う必要はありません。